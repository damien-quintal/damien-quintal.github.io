<!DOCTYPE html><html lang="en">
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <title>Third-Party Website - LO 2.0</title>
        <meta content="Third-Party Website - LO 2.0" property="og:title">
        <meta content="Showcase Website for Demonstrating Lightning Out 2.0 and UMA Forms Features" property="og:description">
        <meta content="Showcase Website for Demonstrating Lightning Out 2.0 and UMA Forms Features" property="description">
        <style>
            body {
                margin: auto;
                max-width: 800px;
                padding: 20px;
            }
            #form {
                border: 5px solid rgb(83, 83, 216);
                margin: 10px;
                padding: 10px;
            }
            fieldset {
                background: rgba(255, 255, 255, .5);
                display: inline-block;
            }
            dt, legend {
                font-weight: bold;
            }
            h1 {
                color: #fff;
                font-family: monospace;
                font-size: 5rem;
                position: absolute;
                top: 0;
            }
            .content {
                background-color:#ADD8E6;
                border-radius: 1rem;
                padding: 1rem;
                position: relative;
            }
            .hero {
                margin-left: -1rem;
                margin-top: -1rem;
                border-radius: 1rem 1rem 0 0;
            }
            .bottom {
                background: url(https://ecsmrtperf.perf2g.my.pc-rnd.site.com/lpvforcesite/resource/1730867338000/bgbar);
                height: 3rem;
                margin-bottom: -1rem;
                margin-left: -1rem;
                margin-right: -1rem;
                border-radius: 0 0 1rem 1rem;
            }
        </style>
    </head>
    <body style="background-color:rgb(80, 141, 179)">
        <div class="content">
            <h1>Third-Party Website - <abbr title="Lightning Out">LO</abbr> 2.0</h1>
            <img class="hero" src="https://ecsmrtperf.perf2g.my.pc-rnd.site.com/lpvforcesite/resource/1730867357000/hero" alt="Hero image" width="800" height="296" />
            <h2>Revolutionize Business with Salesforce Lightning Out</h2>
            <p>Salesforce Lightning Out is an exceptional and innovative feature that truly revolutionizes the way businesses interact with their Salesforce data. This feature enables the embedding of Lightning components into any external web application, thereby extending the power and functionality of Salesforce beyond its native environment. It's a game-changer for businesses that rely on multiple platforms, as it provides seamless integration and interaction with Salesforce data without the need to switch between applications. This not only enhances efficiency but also streamlines operations, saving valuable time and resources. The Salesforce Lightning Out feature truly embodies the spirit of innovation, pushing the boundaries of what is possible in the realm of customer relationship management.</p>
            <script>
                (function(that) {
                    'use strict';
                    that.performance.mark('lo-start', { detail: 'fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw'});
                
                    class LightningOut extends HTMLElement {
                
                        static #frameDomain = 'https://lo.clwr.blitztesting.com';
                        // All Sites (Builder)
                        //   (1) Create New Page!
                        //   (2) Navigate: Page Actions > Page Settings > URL
                        static #framePath = '/welcome/lo/fragment__z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw';
                        static #frameQuery = '?sfdc.lightning_out=true&parentOrigin=' + window.location.origin;
                
                        #startTime;
                
                        #iframeRef;
                        #shadowRef;
                
                        // Indicates when the whole <iframe> page has loaded.
                        #readyIFrame = false;
                        // Indicate when the Lightning Out Container has imported the fragment component.
                        #readyLOContainer = false;
                        #queueAddEventListener = [];
                        #queueDispatchEvent = [];
                
                        #messageListener;
                
                        constructor() {
                            super();
                            this.#startTime = that.performance.mark('lo-component-start', { detail: { cmp: 'fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw', id: this.getAttribute('id')}}).startTime;
                        }
                
                        static #reportError(err) {
                            const body = JSON.stringify({
                                subject: 'Lightning Out 2.0 Client Error',
                                message: err.message,
                                stack: err.stack,
                                webruntimeBootstrap: false,
                                extra: {
                                    message: err.name,
                                    filename: err.filename,
                                    lineno: err.lineno,
                                    colno: err.colno
                                },
                                location: {
                                    pathname: that.location.pathname,
                                    hostname: that.location.hostname
                                }
                            });
                            that?.navigator?.sendBeacon('https://lo.clwr.blitztesting.com/welcome/webruntime/log/errors', body);
                        }
                
                        #preload(endpoint) {
                            const reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
                            const reIsNative = RegExp(
                                `^${Function.prototype.toString
                                    .call(Object.prototype.hasOwnProperty)
                                    .replace(reRegExpChar, '\\$&')
                                    .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?')}$`,
                            );
                            const isObject = (value) => {
                                const type = typeof value;
                                return value != null && (type === 'object' || type === 'function');
                            }
                            const isNative = (value) => {
                                return isObject(value) && reIsNative.test(value);
                            }
                
                            if (!isNative(Document.prototype.createElement) || !isNative(Element.prototype.attachShadow)) {
                                throw new Error('Lightning Out: This component requires the native JavaScript API to be present. For security reasons, native functions cannot be overwritten.');
                            }
                
                            const iframe = that.document.createElement('iframe');
                            const shadow = this.attachShadow({ mode: 'closed' });
                            iframe.name = 'lightning_af';
                            // allow-top-navigation should only be enabled for UMA External Forms as Forms are first party and trusted.
                            // No custom code is enabled in External Forms scenario. When this assumption changed, this code needs to
                            // be reviewed and updated.
                            iframe.sandbox = 'allow-same-origin allow-downloads allow-forms allow-scripts allow-top-navigation-by-user-activation';
                            iframe.frameborder = 0;
                            // DEPRECATED: https://caniuse.com/?search=iframe%20scrolling
                            //   Suggested to use 'overflow:hidden;'
                            //   But some browsers might wrongly support overflow.
                            //   Therefore, we add both.
                            iframe.scrolling = 'no';
                            // DEFAULT STYLES:
                            //   BORDER: Remove 1px border that is the default style for <iframe>.
                            //   OVERFLOW: Content outside of the <iframe> will be hidden.
                            //   WIDTH: Dynamically resize to fit the width of the container.
                            iframe.style = 'border:0;overflow:hidden;width:100%;';
                            iframe.onload = () => {
                                // It is possible in edge cases, to change the iframe URL.
                                // This code will delete the web component if this happens,
                                // because it is assumed to be someone hacking the code.
                                if (this.#readyIFrame) {
                                    this.#shadowRef.innerHTML = '';
                                    this.remove();
                                    throw new Error('Lightning Out: This component cannot be rerendered for security reasons.');
                                }
                                iframe.style.display = 'block';
                                this.#readyIFrame = true;
                                // Chrome will call the onload even when there is an error and the timeout will detect the error.
                                /*setTimeout(() => {
                                    if (!this.#readyLOContainer) {
                                        const err = new Error('Lightning Out: Unable to load iframe.');
                                        LightningOut.#reportError(err);
                                        throw err;
                                    }
                                }, 100);*/
                            };
                
                            // Property Access === '';
                            // 'getAttribute' Access === null;
                            const title = this.getAttribute('title');
                            if (title) {
                                iframe.title = title;
                            }
                
                            this.#messageListener = (event) => {
                                try {
                                    // (1) Ensure that event.origin is set for all postMessage events.
                                    // (2) For events from the iframe to the host document. We will need to do the reverse.
                                    //     The target origin will need to be the URL of the host document and we will need to
                                    //     check if it matches the URL of the host document before reading the message.
                                    //     This flow is trickier as we do not necessarily know the URL of the host document
                                    //     from the iframe. However, from the iframe back to the host document is slightly less of
                                    //     a concern and we could set the targetOrigin to '*' for now and fix this up later.
                                    if (event.origin !== LightningOut.#frameDomain) {
                                        that.console.trace(`Lightning Out: Message ignored due to different ${event.origin}.`);
                                        return;
                                    }
                                    if (event.source !== this.#iframeRef.contentWindow) {
                                        that.console.trace('Lightning Out: Message ignored due to different source.');
                                        return;
                                    }
                                    switch(event.data.type) {
                                        case 'lo.height-change': {
                                            if (event.data) {
                                                this.#iframeRef.height = event.data.height;
                                            }
                                            break;
                                        }
                                        case 'lo.dispatchEvent': {
                                            const customEvent = new that.CustomEvent(event.data.name, { detail: event.data.detail });
                                            super.dispatchEvent(customEvent);
                                            break;
                                        }
                                        case 'lo.ready': {
                                            this.#readyLOContainer = true;
                                            const detail = { cmp: 'fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw', id: this.getAttribute('id') },
                                                  end = that.performance.mark('lo-component-ready', { detail }).startTime;
                                            that.performance.measure(`loading-${detail.cmp}`, { detail, start: this.#startTime, end });
                                            this.#startTime = null;
                                            while (this.#queueAddEventListener.length) {
                                                const eventArguments = this.#queueAddEventListener.shift();
                                                this.addEventListener(...eventArguments);
                                            }
                                            while (this.#queueDispatchEvent.length) {
                                                const event = this.#queueDispatchEvent.shift();
                                                this.dispatchEvent(event);
                                            }
                                            this.#queueAddEventListener = this.#queueDispatchEvent = null;
                                        }
                                    }
                                    event.stopImmediatePropagation();
                                } catch (err) {
                                    LightningOut.#reportError(err);
                                    throw err;
                                }
                            };
                            that.addEventListener('message', this.#messageListener);
                
                            iframe.src = endpoint;
                            this.#iframeRef = shadow.appendChild(iframe);
                            this.#shadowRef = shadow;
                        }
                
                        addEventListener(eventName) {
                            try {
                                if (this.#readyLOContainer) {
                                    super.addEventListener(...arguments);
                                    this.#iframeRef.contentWindow.postMessage({
                                        name: eventName,
                                        type: 'lo.addEventListener',
                                    }, LightningOut.#frameDomain);
                                } else {
                                    this.#queueAddEventListener.push(arguments);
                                }
                            } catch (err) {
                                LightningOut.#reportError(err);
                                throw err;
                            }
                        }
                
                        dispatchEvent(event) {
                            try {
                                if (this.#readyLOContainer) {
                                    super.dispatchEvent(...arguments);
                                    this.#iframeRef.contentWindow.postMessage({
                                        name: event.type,
                                        detail: event.detail,
                                        type: 'lo.dispatchEvent',
                                    }, LightningOut.#frameDomain);
                                } else {
                                    this.#queueDispatchEvent.push(event);
                                }
                            } catch (err) {
                                LightningOut.#reportError(err);
                                throw err;
                            }
                        }
                
                        adoptedCallback() {
                            try {
                                this.remove();
                                throw new Error('Lightning Out: This component cannot be rerendered for security reasons.');
                            } catch (err) {
                                LightningOut.#reportError(err);
                                throw err;
                            }
                        }
                        connectedCallback() {
                            try {
                                if (!this.#shadowRef) {
                                    this.#preload(LightningOut.#frameDomain + LightningOut.#framePath + LightningOut.#frameQuery);
                                } else {
                                    this.remove();
                                    throw new Error('Lightning Out: This component cannot be rerendered for security reasons.');
                                }
                            } catch (err) {
                                LightningOut.#reportError(err);
                                throw err;
                            }
                        }
                        disconnectedCallback() {
                            try {
                                this.#shadowRef.innerHTML = '';
                                if (this.#messageListener) {
                                    that.removeEventListener('message', this.#messageListener);
                                }
                            } catch (err) {
                                LightningOut.#reportError(err);
                                throw err;
                            }
                        }
                    }
                
                    that.customElements.define('fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw', LightningOut);
                })(window);
            </script>
<fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw></fragment-z4vkanilmfzk1snvruvppdstnohkqjj2280ad6pr8dw>
            <div style="display:inline-block">
                <div id="form" style="display:none;">
                    <div style="display:inline-block">
                        <form>
                            <label>Return: <input type="text" id="returnInput"/></label>
                            <br />
                            <span>Write XYZ in the input box.</span>
                            <br />
                            <button id="button">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
            <div>
                <fieldset>
                    <legend>Legend</legend>
                    <dl>
                        <dt>Blue</dt>
                        <dd>Third-Party Website</dd>
                        <dt>Yellow</dt>
                        <dd>ShadowRoot + IFrame</dd>
                        <dt>Green</dt>
                        <dd>Lightning Out Container</dd>
                    </dl>
                </fieldset>
            </div>
            <p style="columns:2;column-width:300px;font-size:1.5rem">
                Salesforce Lightning Out is an exceptional and innovative feature that truly revolutionizes the way businesses interact with their Salesforce data. This feature enables the embedding of Lightning components into any external web application, thereby extending the power and functionality of Salesforce beyond its native environment. It's a game-changer for businesses that rely on multiple platforms, as it provides seamless integration and interaction with Salesforce data without the need to switch between applications. This not only enhances efficiency but also streamlines operations, saving valuable time and resources. The Salesforce Lightning Out feature truly embodies the spirit of innovation, pushing the boundaries of what is possible in the realm of customer relationship management.
                <img src="https://ecsmrtperf.perf2g.my.pc-rnd.site.com/lpvforcesite/resource/1730867377000/users" alt="Image of a user" style="float: right" width="300" height="300"/>
            </p>
            <div class="bottom"></div>
        </div>
    </body>
</html>
